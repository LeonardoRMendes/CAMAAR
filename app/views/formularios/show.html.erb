<h1><%= @formulario.nome %></h1>

<% if flash[:alert] %>
  <div class="alert alert-danger">
    <%= flash[:alert] %>
  </div>
<% end %>

<%= form_with url: formulario_respostas_path(@formulario), method: :post, local: true do |form| %>
  <% @questoes.each do |questao| %>
    <div class="question-group">
      <%= label_tag "respostas[#{questao.id}]", questao.texto %>
      <% if questao.obrigatoria %>
        <span class="required">*</span>
      <% end %>
      
      <% if questao.tipo == 'multipla_escolha' %>
        <% if questao.opcoes_lista.present? %>
          <div class="opcoes-multipla-escolha">
            <% questao.opcoes_lista.each do |opcao| %>
              <label class="opcao-label">
                <%= radio_button_tag "respostas[#{questao.id}]", opcao, false, 
                    required: questao.obrigatoria, class: "opcao-radio" %>
                <%= opcao %>
              </label>
            <% end %>
          </div>
        <% end %>
      <% else %>
        <%= text_area_tag "respostas[#{questao.id}]", "", 
                          id: questao.texto, 
                          class: "form-control",
                          rows: 3,
                          required: questao.obrigatoria %>
      <% end %>
    </div>
  <% end %>
  
  <div class="form-group">
    <%= form.submit "Enviar Avaliação", class: "btn btn-primary" %>
  </div>
<% end %>

<style>
  .question-group {
    margin-bottom: 20px;
  }
  
  .question-group label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
  }
  
  .required {
    color: red;
  }
  
  .form-control {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  
  .opcoes-multipla-escolha {
    margin-top: 8px;
  }
  
  .opcao-label {
    display: block !important;
    font-weight: normal !important;
    margin-bottom: 8px;
    cursor: pointer;
    padding: 8px;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    background-color: #f9f9f9;
    transition: background-color 0.2s;
  }
  
  .opcao-label:hover {
    background-color: #e8f4fd;
  }
  
  .opcao-radio {
    margin-right: 10px;
  }
  
  .btn {
    padding: 10px 20px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  
  .btn:hover {
    background-color: #0056b3;
  }
  
  .alert {
    padding: 10px;
    margin-bottom: 20px;
    border-radius: 4px;
  }
  
  .alert-danger {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
  }
</style>
